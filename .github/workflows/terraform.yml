name: First Workflow
on: workflow_dispatch

jobs:
  first-job:
    runs-on: ubuntu-latest
    steps:
      - name: Download terraform
        run: wget https://releases.hashicorp.com/terraform/1.5.2/terraform_1.5.2_linux_amd64.zip
      - name: extract terraform
        run: unzip terraform_1.5.2_linux_amd64.zip
      - name: Find Version
        run:  terraform -version
      - name: copy file
        run:  sudo cp "terraform"  "/usr/local/bin"  
  terraform_EKS_Deployment:
     needs: first-job
     runs-on: ubuntu-latest
     steps:
          - uses: actions/checkout@v1
          - name: Configure AWS Credentials
            uses: aws-actions/configure-aws-credentials@v1
            with:
              aws-region: us-east-1
              aws-access-key-id: ${{ secrets.AWS_ACCESS_KEY_ID }}
              aws-secret-access-key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}
          - name: Initialize Terraform
            run: |
              terraform init -input=false          
          - name: Plan Terraform
            id: plan
            run: |
              terraform plan -input=false -no-color  
